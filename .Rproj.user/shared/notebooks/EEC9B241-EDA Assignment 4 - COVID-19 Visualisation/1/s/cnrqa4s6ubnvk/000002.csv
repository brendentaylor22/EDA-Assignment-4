"0","#Get latest COVID-19 data"
"0","#I don't run this in a separate file because I want the latest data every time the file is knit"
"0","get_ncov_data = function(){"
"0","ncov <- read.csv(""https://raw.githubusercontent.com/datasets/covid-19/master/data/countries-aggregated.csv"")"
"0","# convert Date from factor to date class"
"0","ncov <- ncov %>% "
"0","  mutate(Date = ymd(Date))"
"0",""
"0","return(ncov)"
"0","}"
"0","ncov = get_ncov_data()"
"0",""
"0","#Get geometry data for the world and all its countries"
"0","get_geom_data = function(){"
"0","world_ne0 = ne_countries(scale = ""medium"", returnclass = ""sf"", type = ""countries"")"
"0","world_ne = world_ne0 %>%"
"0","  select(c(sovereignt, geometry))"
"0",""
"0","#Some countries have multiple entries in their geometry data e.g. for certain colonies of the UK"
"0","#The ncov data obviously doesn't account for this so the graphics are greatly distorted since these tiny islands have 'thousands' of cases"
"0","#These will be removed and only the ""mainland"" kept"
"0","rows_to_remove = c(13,92,100,158, #Australia"
"0","                   91, 133, #China"
"0","                   55, #Cyprus"
"0","                   74,87, #Denmark"
"0","                   6, #Finland"
"0","                   14,28,134,156,181,200,236, #France"
"0","                   1, 53, 208, #Netherlands"
"0","                   47,161, #NZ"
"0","                   11,89,148,176,233, #US"
"0","                   4,31,54,72,79,98,101,109,151,170,192,193,211,232) #UK"
"0",""
"0","world_ne = world_ne[-rows_to_remove,]"
"0",""
"0","return(world_ne)"
"0","}"
"0","world_ne = get_geom_data()"
"0",""
"0","#The COVID-19 data is assumed to be clean since the repo used claims to be the cleaned version of data from John's Hopkins. So no structural checks, NA checks etc. are done at this stage."

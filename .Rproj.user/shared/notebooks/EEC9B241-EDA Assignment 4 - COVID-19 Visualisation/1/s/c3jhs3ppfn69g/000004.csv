"0","#Need to add geometry data to ncov data"
"0","#First create column in ncov for World Bank country code. Will then use this code to join geometry data"
"0","ncov$iso3c = countrycode(sourcevar = ncov$Country, origin = ""country.name"", destination = ""wb"")"
"0",""
"0","#Missing code for Holy See, Diamond Princess and MS Zaandam"
"0","#Need to replace Holy See with Vatican and remove '*' from Taiwan"
"0","ncov$Country = ncov$Country %>%"
"0","  recode(""Holy See"" = ""Vatican"") %>%"
"0","  recode(""Taiwan*"" = ""Taiwan"")"
"0",""
"0","#Add code for missing countries in ncov"
"0","ncov = ncov %>%"
"0","  mutate(iso3c = ifelse(Country==""Vatican"", ""VAT"", iso3c)) %>%"
"0","  mutate(iso3c = ifelse(Country==""Western Sahara"", ""ESH"", iso3c)) %>%"
"0","  mutate(iso3c = ifelse(Country==""Diamond Princess"", ""CDP"", iso3c)) %>%"
"0","  mutate(iso3c = ifelse(Country==""MS Zaandam"", ""CMZ"", iso3c))"
"0",""
"0","world_ne$iso3c = countrycode(sourcevar = world_ne$sovereignt, "
"0","                               origin = ""country.name"", destination = ""wb"")"
"0",""
"0","#A few countries without countrycodes so need to insert manually in world geom data"
"0","world_ne = world_ne %>%"
"0","  mutate(iso3c = ifelse(sovereignt == ""Western Sahara"", ""ESH"", iso3c)) %>%"
"0","  mutate(iso3c = ifelse(sovereignt == ""Vatican"", ""VAT"", iso3c))"
"0",""
"0","#world_ne contains 2 Israel entries. Row 179 is West Bank and Gaza so will be renamed"
"0","world_ne[180,1] = ""West Bank and Gaza"""
"0","world_ne = world_ne %>%"
"0","  mutate(iso3c = ifelse(sovereignt == ""West Bank and Gaza"", ""PSE"", iso3c))"
"0",""
"0","#Join ncov and geometry data"
"0","dat = left_join(ncov, world_ne, by = c(""iso3c""))"
"0","dat = dat %>%"
"0","  select(-sovereignt)"
